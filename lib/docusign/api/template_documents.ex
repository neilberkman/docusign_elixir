# NOTE: This file is auto generated by OpenAPI Generator 7.12.0 (https://openapi-generator.tech).
# Do not edit this file manually.

defmodule DocuSign.Api.TemplateDocuments do
  @moduledoc """
  API calls for all endpoints tagged `TemplateDocuments`.
  """

  import DocuSign.RequestBuilder

  alias DocuSign.Connection
  alias DocuSign.Model.EnvelopeDocument
  alias DocuSign.Model.ErrorDetails
  alias DocuSign.Model.TemplateDocumentsResult

  @doc """
  Deletes documents from a template.
  This method deletes one or more documents from an existing template.  To delete a document, use only the relevant parts of the [`envelopeDefinition`](#envelopeDefinition). For example, this request body specifies that you want to delete the document whose `documentId` is \"1\".   ```text {   \"documents\": [     {       \"documentId\": \"1\"     }   ] } ```

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `template_id` (String.t): The ID of the template.
  - `opts` (keyword): Optional parameters
    - `:body` (EnvelopeDefinition):

  ### Returns

  - `{:ok, DocuSign.Model.TemplateDocumentsResult.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec documents_delete_template_documents(Tesla.Env.client(), String.t(), String.t(), keyword()) ::
          {:ok, ErrorDetails.t()}
          | {:ok, TemplateDocumentsResult.t()}
          | {:error, Tesla.Env.t()}
  def documents_delete_template_documents(connection, account_id, template_id, opts \\ []) do
    optional_params = %{
      :body => :body
    }

    request =
      %{}
      |> method(:delete)
      |> url("/v2.1/accounts/#{account_id}/templates/#{template_id}/documents")
      |> add_optional_params(optional_params, opts)
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, TemplateDocumentsResult},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Gets PDF documents from a template.
  This method retrieves one or more PDF documents from the template that you specify.  You can specify the ID of the document to retrieve, or pass in the value `combined` to retrieve all documents in the template as a single PDF file.

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `document_id` (String.t): The unique ID of the document within the envelope.  Unlike other IDs in the eSignature API, you specify the `documentId` yourself. Typically the first document has the ID `1`, the second document `2`, and so on, but you can use any numbering scheme that fits within a 32-bit signed integer (1 through 2147483647).   Tab objects have a `documentId` property that specifies the document on which to place the tab.
  - `template_id` (String.t): The ID of the template.
  - `opts` (keyword): Optional parameters
    - `:encrypt` (String.t): When **true,** the PDF bytes returned in the response are encrypted for all the key managers configured on your Docusign account. You can decrypt the documents by using the Key Manager DecryptDocument API method. For more information about Key Manager, see the Docusign Security Appliance Installation Guide that your organization received from Docusign.
    - `:file_type` (String.t):
    - `:show_changes` (String.t): When **true,** any document fields that a recipient changed are highlighted in yellow in the returned PDF document, and optional signatures or initials are outlined in red.

  ### Returns

  - `{:ok, String.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec documents_get_template_document(
          Tesla.Env.client(),
          String.t(),
          String.t(),
          String.t(),
          keyword()
        ) :: {:ok, ErrorDetails.t()} | {:ok, String.t()} | {:error, Tesla.Env.t()}
  def documents_get_template_document(connection, account_id, document_id, template_id, opts \\ []) do
    optional_params = %{
      :encrypt => :query,
      :file_type => :query,
      :show_changes => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/v2.1/accounts/#{account_id}/templates/#{template_id}/documents/#{document_id}")
      |> add_optional_params(optional_params, opts)
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Gets a list of documents associated with a template.
  Retrieves a list of documents associated with the specified template.

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `template_id` (String.t): The ID of the template.
  - `opts` (keyword): Optional parameters
    - `:include_tabs` (String.t): Reserved for Docusign.

  ### Returns

  - `{:ok, DocuSign.Model.TemplateDocumentsResult.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec documents_get_template_documents(Tesla.Env.client(), String.t(), String.t(), keyword()) ::
          {:ok, ErrorDetails.t()}
          | {:ok, TemplateDocumentsResult.t()}
          | {:error, Tesla.Env.t()}
  def documents_get_template_documents(connection, account_id, template_id, opts \\ []) do
    optional_params = %{
      :include_tabs => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/v2.1/accounts/#{account_id}/templates/#{template_id}/documents")
      |> add_optional_params(optional_params, opts)
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, TemplateDocumentsResult},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Updates a template document.
  This methods updates an existing template document.

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `document_id` (String.t): The unique ID of the document within the envelope.  Unlike other IDs in the eSignature API, you specify the `documentId` yourself. Typically the first document has the ID `1`, the second document `2`, and so on, but you can use any numbering scheme that fits within a 32-bit signed integer (1 through 2147483647).   Tab objects have a `documentId` property that specifies the document on which to place the tab.
  - `template_id` (String.t): The ID of the template.
  - `opts` (keyword): Optional parameters
    - `:is_envelope_definition` (String.t):
    - `:body` (EnvelopeDefinition):

  ### Returns

  - `{:ok, DocuSign.Model.EnvelopeDocument.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec documents_put_template_document(
          Tesla.Env.client(),
          String.t(),
          String.t(),
          String.t(),
          keyword()
        ) ::
          {:ok, EnvelopeDocument.t()}
          | {:ok, ErrorDetails.t()}
          | {:error, Tesla.Env.t()}
  def documents_put_template_document(connection, account_id, document_id, template_id, opts \\ []) do
    optional_params = %{
      :body => :body,
      :is_envelope_definition => :query
    }

    request =
      %{}
      |> method(:put)
      |> url("/v2.1/accounts/#{account_id}/templates/#{template_id}/documents/#{document_id}")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, EnvelopeDocument},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Adds documents to a template document.
  Adds one or more documents to an existing template document.

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `template_id` (String.t): The ID of the template.
  - `opts` (keyword): Optional parameters
    - `:body` (EnvelopeDefinition):

  ### Returns

  - `{:ok, DocuSign.Model.TemplateDocumentsResult.t}` on success
  - `{:error, Tesla.Env.t}` on failure
  """
  @spec documents_put_template_documents(Tesla.Env.client(), String.t(), String.t(), keyword()) ::
          {:ok, ErrorDetails.t()}
          | {:ok, TemplateDocumentsResult.t()}
          | {:error, Tesla.Env.t()}
  def documents_put_template_documents(connection, account_id, template_id, opts \\ []) do
    optional_params = %{
      :body => :body
    }

    request =
      %{}
      |> method(:put)
      |> url("/v2.1/accounts/#{account_id}/templates/#{template_id}/documents")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, TemplateDocumentsResult},
      {400, ErrorDetails}
    ])
  end
end
