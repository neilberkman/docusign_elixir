# NOTE: This file is auto generated by OpenAPI Generator
# https://openapi-generator.tech
# Do not edit this file manually.

defmodule DocuSign.Api.ConnectEvents do
  @moduledoc """
  API calls for all endpoints tagged `ConnectEvents`.
  """

  import DocuSign.RequestBuilder

  alias DocuSign.Connection
  alias DocuSign.Model.ConnectFailureResults
  alias DocuSign.Model.ConnectLog
  alias DocuSign.Model.ConnectLogs
  alias DocuSign.Model.ErrorDetails

  @doc """
  Deletes a Connect failure log entry.
  Deletes a Connect failure log entry.  To delete all the Connect failure log entries, specify `all` for the `failureId` path parameter.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage>

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `failure_id` (String.t): The ID of the Connect post failure. Use `all` to delete all failures for the account.
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, map()}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_failures_delete_connect_failure_log(DocuSign.Connection.t(), String.t(), String.t(), keyword()) ::
          {:ok, map()}
          | {:error, Req.Response.t()}
  def connect_failures_delete_connect_failure_log(connection, account_id, failure_id, _opts \\ []) do
    request =
      %{}
      |> method(:delete)
      |> url("/v2.1/accounts/#{account_id}/connect/failures/#{failure_id}")
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, %{}},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Gets the Connect failure log information.
  Retrieves the Connect failure log information.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage>  Use this method to determine which envelopes failed to post. You can then use [ConnectEvents: retryForEnvelopes][retry] to create a republish request.  [retry]: /docs/esign-rest-api/reference/connect/connectevents/retryforenvelopes/

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `opts` (keyword): Optional parameters
    - `:from_date` (String.t): The start date for a date range in UTC DateTime format.  **Note:** If this property is null, no date filtering is applied.
    - `:to_date` (String.t): The end of a search date range in UTC DateTime format. When you use this parameter, only templates created up to this date and time are returned.  **Note:** If this property is null, the value defaults to the current date.

  ### Returns

  - `{:ok, DocuSign.Model.ConnectLogs.t}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_failures_get_connect_logs(DocuSign.Connection.t(), String.t(), keyword()) ::
          {:ok, ConnectLogs.t()}
          | {:error, Req.Response.t()}
  def connect_failures_get_connect_logs(connection, account_id, opts \\ []) do
    optional_params = %{
      :from_date => :query,
      :to_date => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/v2.1/accounts/#{account_id}/connect/failures")
      |> add_optional_params(optional_params, opts)
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ConnectLogs},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Deletes a specified Connect log entry.
  Deletes a specified entry from the Connect Log.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage>

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `log_id` (String.t): The ID of the Connect log entry. Use `all` to delete all entries for the account.
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_log_delete_connect_log(DocuSign.Connection.t(), String.t(), String.t(), keyword()) ::
          {:ok, nil}
          | {:error, Req.Response.t()}
  def connect_log_delete_connect_log(connection, account_id, log_id, _opts \\ []) do
    request =
      %{}
      |> method(:delete)
      |> url("/v2.1/accounts/#{account_id}/connect/logs/#{log_id}")
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Deletes a list of Connect log entries.
  Deletes a list of Connect log entries for your account.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage>

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_log_delete_connect_logs(DocuSign.Connection.t(), String.t(), keyword()) ::
          {:ok, nil}
          | {:error, Req.Response.t()}
  def connect_log_delete_connect_logs(connection, account_id, _opts \\ []) do
    request =
      %{}
      |> method(:delete)
      |> url("/v2.1/accounts/#{account_id}/connect/logs")
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, false},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Gets a Connect log entry.
  Retrieves the specified Connect log entry for your account.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage>  The `enableLog` setting in the Connect configuration must be set to **true** to enable logging. If logging is not enabled, then no log entries are recorded. 

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `log_id` (String.t): The ID of the Connect log entry.
  - `opts` (keyword): Optional parameters
    - `:additional_info` (String.t): When **true,** the response includes the `connectDebugLog` information.

  ### Returns

  - `{:ok, DocuSign.Model.ConnectLog.t}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_log_get_connect_log(DocuSign.Connection.t(), String.t(), String.t(), keyword()) ::
          {:ok, ConnectLog.t()}
          | {:error, Req.Response.t()}
  def connect_log_get_connect_log(connection, account_id, log_id, opts \\ []) do
    optional_params = %{
      :additional_info => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/v2.1/accounts/#{account_id}/connect/logs/#{log_id}")
      |> add_optional_params(optional_params, opts)
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ConnectLog},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Gets the Connect log.
  Retrieves a list of the 100 most recent Connect log entries for your account.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage>  The `enableLog` setting in the Connect configuration must be set to **true** to enable logging. Log entries are deleted after 15 days.  

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `opts` (keyword): Optional parameters
    - `:from_date` (String.t): The start date for a date range in UTC DateTime format.  **Note:** If this property is null, no date filtering is applied.
    - `:to_date` (String.t): The end of a search date range in UTC DateTime format. When you use this parameter, only templates created up to this date and time are returned.  **Note:** If this property is null, the value defaults to the current date.

  ### Returns

  - `{:ok, DocuSign.Model.ConnectLogs.t}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_log_get_connect_logs(DocuSign.Connection.t(), String.t(), keyword()) ::
          {:ok, ConnectLogs.t()}
          | {:error, Req.Response.t()}
  def connect_log_get_connect_logs(connection, account_id, opts \\ []) do
    optional_params = %{
      :from_date => :query,
      :to_date => :query
    }

    request =
      %{}
      |> method(:get)
      |> url("/v2.1/accounts/#{account_id}/connect/logs")
      |> add_optional_params(optional_params, opts)
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ConnectLogs},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Republishes Connect information for multiple envelopes.
  Republishes Connect information for the  specified set of envelopes.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage>   The primary use is to republish Connect post failures by including envelope IDs for the envelopes that failed to post in the request. The list of envelope IDs that failed to post correctly can be retrieved by calling to [Connect::listEventLogs](/docs/esign-rest-api/reference/connect/connectevents/list/) retrieve the failure log.  

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `opts` (keyword): Optional parameters
    - `:body` (ConnectFailureFilter): 

  ### Returns

  - `{:ok, DocuSign.Model.ConnectFailureResults.t}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_publish_put_connect_retry(DocuSign.Connection.t(), String.t(), keyword()) ::
          {:ok, ConnectFailureResults.t()}
          | {:error, Req.Response.t()}
  def connect_publish_put_connect_retry(connection, account_id, opts \\ []) do
    optional_params = %{
      :body => :body
    }

    request =
      %{}
      |> method(:put)
      |> url("/v2.1/accounts/#{account_id}/connect/envelopes/retry_queue")
      |> add_optional_params(optional_params, opts)
      |> ensure_body()
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ConnectFailureResults},
      {400, ErrorDetails}
    ])
  end

  @doc """
  Republishes Connect information for the specified envelope.
  Republishes Connect information for the specified envelope.  <ds-inlinemessage> To use this method, you must be an account administrator and Connect must be enabled on your account. </ds-inlinemessage> 

  ### Parameters

  - `connection` (DocuSign.Connection): Connection to server
  - `account_id` (String.t): The external account number (int) or account ID GUID.
  - `envelope_id` (String.t): The envelope's GUID.   Example: `93be49ab-xxxx-xxxx-xxxx-f752070d71ec` 
  - `opts` (keyword): Optional parameters

  ### Returns

  - `{:ok, DocuSign.Model.ConnectFailureResults.t}` on success
  - `{:error, Req.Response.t}` on failure
  """
  @spec connect_publish_put_connect_retry_by_envelope(DocuSign.Connection.t(), String.t(), String.t(), keyword()) ::
          {:ok, ConnectFailureResults.t()}
          | {:error, Req.Response.t()}
  def connect_publish_put_connect_retry_by_envelope(connection, account_id, envelope_id, _opts \\ []) do
    request =
      %{}
      |> method(:put)
      |> url("/v2.1/accounts/#{account_id}/connect/envelopes/#{envelope_id}/retry_queue")
      |> ensure_body()
      |> Enum.to_list()

    connection
    |> Connection.request(request)
    |> evaluate_response([
      {200, ConnectFailureResults},
      {400, ErrorDetails}
    ])
  end
end
